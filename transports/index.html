<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>🛡️ Secure transports - eznode</title><base data-vue-tag="ssr" href="/"><meta name="gridsome:hash" content="1ed21098aa0f2cacc1b1ca6e531e28f8e4ec3ff7"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="A simple pruning-friendly setup for a personal bitcoin full node"><meta data-vue-tag="ssr" name="og:title" content="✨ 𝚎𝚣𝚗𝚘𝚍𝚎"><meta data-vue-tag="ssr" name="og:description" content="A simple pruning-friendly setup for a personal bitcoin full node"><meta data-vue-tag="ssr" name="og:image" content="https://x.ezno.de/preview.png"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:site" content="@eznode_"><meta data-vue-tag="ssr" name="theme-color" content="#10c186"><meta data-vue-tag="ssr" name="apple-mobile-web-app-status-bar-style" content="default"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/a-46f08d0/static/favicon.ce0531f.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/a-46f08d0/static/favicon.ac8d93a.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/a-46f08d0/static/favicon.b9532cc.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/a-46f08d0/static/favicon.f22e9f3.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/a-46f08d0/static/favicon.62d22cb.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/a-46f08d0/static/favicon.1539b60.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/a-46f08d0/static/favicon.dc0cdc5.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/a-46f08d0/static/favicon.7b22250.d0ae12e753f5c3501db7de6fd22a4362.png"><link data-vue-tag="ssr" rel="manifest" href="/manifest.json"><link rel="preload" href="/a-46f08d0/css/0.styles.549f15ec.css" as="style"><link rel="preload" href="/a-46f08d0/js/app.bd2b35c9.js" as="script"><link rel="preload" href="/a-46f08d0/js/page--src--templates--doc-vue.5122f0d2.js" as="script"><link rel="prefetch" href="/a-46f08d0/js/page--node-modules--gridsome--app--pages--404-vue.3006cc54.js"><link rel="prefetch" href="/a-46f08d0/js/page--src--pages--index-vue.c8256b14.js"><link rel="stylesheet" href="/a-46f08d0/css/0.styles.549f15ec.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body class="bright" >
    <div data-server-rendered="true" id="app" class="site" data-v-6bdbf9f8 data-v-162f0379><header class="header" data-v-7895a23d data-v-6bdbf9f8><a href="/" title="Back to home" class="logo active" data-v-610b9c00 data-v-7895a23d>
  eznode
</a><nav class="nav" data-v-7895a23d><button id="themeSwitch" aria-label="Switch theme between light and dark" data-v-deb4450c data-v-7895a23d><!----><!----></button><button aria-label="Toggle the sidebar" class="toggle" data-v-def1a688 data-v-7895a23d><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="open feather feather-menu" data-v-def1a688 data-v-def1a688><line x1="3" y1="12" x2="21" y2="12" data-v-def1a688></line><line x1="3" y1="6" x2="21" y2="6" data-v-def1a688></line><line x1="3" y1="18" x2="21" y2="18" data-v-def1a688></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="close feather feather-x" style="display:none;" data-v-def1a688 data-v-def1a688><line x1="18" y1="6" x2="6" y2="18" data-v-def1a688></line><line x1="6" y1="6" x2="18" y2="18" data-v-def1a688></line></svg></button></nav></header><aside class="sidebar" data-v-36b904d7 data-v-6bdbf9f8><h2 data-v-36b904d7><a href="/" class="active" data-v-36b904d7><span data-v-36b904d7>eznode</span></a></h2><nav data-v-36b904d7><ul data-v-36b904d7><li class="section" data-v-36b904d7><ul data-v-36b904d7><li data-v-36b904d7><a href="/getting-started" class="topic" data-v-36b904d7>✨ Getting started</a><!----><!----><!----><!----><!----><ul data-v-36b904d7><li data-v-36b904d7><a href="/getting-started#quickstart" class="sub-topic" data-v-36b904d7>🚀 Quickstart</a></li><li data-v-36b904d7><a href="/getting-started#pruning" class="sub-topic" data-v-36b904d7>✂️ Pruning</a></li><li data-v-36b904d7><a href="/getting-started#configuration" class="sub-topic" data-v-36b904d7>⚙️ Configuration</a></li></ul><!----><!----></li><li data-v-36b904d7><a href="/accessing" class="topic" data-v-36b904d7>👩‍💻 Accessing the services</a><!----><!----><!----><!----><!----><!----><!----><ul data-v-36b904d7><li data-v-36b904d7><a href="/accessing#connecting-locally" class="sub-topic" data-v-36b904d7>💻 Connecting locally</a></li><li data-v-36b904d7><a href="/accessing#connecting-remotely" class="sub-topic" data-v-36b904d7>🌐 Connecting remotely</a></li><li data-v-36b904d7><a href="/accessing#authentication" class="sub-topic" data-v-36b904d7>🔐 Authentication</a></li></ul></li><li data-v-36b904d7><a href="/packages" class="topic" data-v-36b904d7>🎁 Packages</a><!----><ul data-v-36b904d7><li data-v-36b904d7><a href="/packages#bitcoin-core" class="sub-topic" data-v-36b904d7>₿ Bitcoin Core</a></li><li data-v-36b904d7><a href="/packages#bitcoin-wallet-tracker" class="sub-topic" data-v-36b904d7>🔍 Bitcoin Wallet Tracker</a></li><li data-v-36b904d7><a href="/packages#btc-rpc-explorer" class="sub-topic" data-v-36b904d7>🗺️ BTC RPC Explorer</a></li><li data-v-36b904d7><a href="/packages#specter-desktop" class="sub-topic" data-v-36b904d7>👻 Specter Desktop</a></li></ul><!----><!----><!----><!----><!----><!----></li><li data-v-36b904d7><a href="/transports" aria-current="page" class="topic active--exact active" data-v-36b904d7>🛡️ Secure transports</a><!----><!----><!----><!----><!----><!----><ul data-v-36b904d7><li data-v-36b904d7><a href="/transports#tor-onion" class="sub-topic" data-v-36b904d7>🧅 Tor Onion</a></li><li data-v-36b904d7><a href="/transports#dropbear-ssh" class="sub-topic" data-v-36b904d7>🐻 Dropbear SSH</a></li><li data-v-36b904d7><a href="/transports#nginx-ssl" class="sub-topic" data-v-36b904d7>🔐 NGINX SSL</a></li><li data-v-36b904d7><a href="/transports#let-s-encrypt" class="sub-topic" data-v-36b904d7>📜 Let's Encrypt</a></li></ul><!----></li><li data-v-36b904d7><a href="/node-management" class="topic" data-v-36b904d7>🔧 Node management</a><!----><!----><!----><!----><ul data-v-36b904d7><li data-v-36b904d7><a href="/node-management#daemonizing" class="sub-topic" data-v-36b904d7>😈 Daemonizing</a></li><li data-v-36b904d7><a href="/node-management#controlling-services" class="sub-topic" data-v-36b904d7>🕹️ Controlling services</a></li><li data-v-36b904d7><a href="/node-management#terminal-display" class="sub-topic" data-v-36b904d7>🖥️ Terminal display</a></li><li data-v-36b904d7><a href="/node-management#viewing-logs" class="sub-topic" data-v-36b904d7>📝 Viewing logs</a></li><li data-v-36b904d7><a href="/node-management#updating" class="sub-topic" data-v-36b904d7>🔄 Updating</a></li><li data-v-36b904d7><a href="/node-management#backing-up" class="sub-topic" data-v-36b904d7>💾 Backing up</a></li></ul><!----><!----><!----></li><li data-v-36b904d7><a href="/signed-images" class="topic" data-v-36b904d7>🔏 Signed images</a><ul data-v-36b904d7></ul><!----><!----><!----><!----><!----><!----><!----></li><li data-v-36b904d7><a href="/building" class="topic" data-v-36b904d7>🏗️ Building locally</a><!----><!----><!----><ul data-v-36b904d7></ul><!----><!----><!----><!----></li></ul></li></ul><a href="https://github.com/ez-org/eznode" title="Git-repository" aria-label="eznode on Github" class="git small" data-v-68e86b8a data-v-36b904d7><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon feather feather-github" data-v-68e86b8a data-v-68e86b8a><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-68e86b8a data-v-68e86b8a></path></svg>
  eznode on Github
</a></nav></aside><main class="main" data-v-6bdbf9f8><h1 data-v-6bdbf9f8 data-v-162f0379>
    🛡️ Secure transports
  </h1><div class="markdown" data-v-6bdbf9f8 data-v-162f0379><h2 id="tor-onion"><a href="#tor-onion" aria-hidden="true"><span class="icon icon-link"></span></a>🧅 Tor Onion</h2>
<p>Tor anonymity network. For secure remote access using onion services and (optionally) for proxying bitcoind.</p>
<p>Onion services provide strong encryption and mutual authentication established based on information embedded into the <code class="language-text">.onion</code> hostname. It does not require setting up port forwarding.</p>
<p>The onion service files, including secret key material, will be kept in <code class="language-text">/data/tor-hsv</code>. If you lose them you'll lose your <code class="language-text">.onion</code> address.</p>
<h4 id="setting-up"><a href="#setting-up" aria-hidden="true"><span class="icon icon-link"></span></a>Setting up</h4>
<p>Start with <code class="language-text">TOR=1</code>. The <code class="language-text">.onion</code> hostname will be shown on startup.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1508 176' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b00742493f19c1c9677d28e877d08640'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b00742493f19c1c9677d28e877d08640)' width='1508' height='176' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAHCAYAAAC4NEsKAAAACXBIWXMAAC4jAAAuIwF4pT92AAADc0lEQVQ4y31U6W7TYBDsIwCp7bY5nKOO7fiO7yMJaUsFgvd/nWVmLUeAKn58%2bq49Z2f3zrAssZZYC0t4ni9XuqzHJ11Pi6U8zhfjvlj89Taexz%2be%2bTauucryPDNMuTet2zKsh//e/138/0hnevto/0jnI38831lLU5x%2bJpv8XownQ%2bqul7bvxF6vZfP8LP1pkCQ7SpqlkhWlZMejHKJIDmEojuvJscglL0vZe66keY57IXGaSpQk%2brdY2TeAzIdHdcz94Wl%2bu09gM6DpPP0bfyQ16U1JUI473/4Gwbr9swj8n/z/C9CdObdkW8zEjg0xHg0pqlqavhV7swEAjpRVKQmSDuMIAOSanHs4SHrMJK8q8Q6%2bJlnUlTRdp7Kny/kGRNW2UreNhAkAzPH39SL9MMj19UWOZaF6EeSarlUd7j7ATbJEyqZBQVrpzyepmlpK2KJfFqWsa/gvEW%2blPivIMsYozdROArkwjuXHr58yQD9KYlmtN/Lpy0w%2bz4w/GADq76qZrJN7BSAHAHS2tG3Z7V3p4Ix31/c1eCbsBQECHBnhBwdtGSbDIPaep44ZvCYFdjQAgOyI00QBKRB4jgQiBNwNHUCo5fr2Ap16BC7LYKvCfQSPb7RJ%2bzy3Q6/JV/ijDsGoVC7X%2bAk0/TO2GOwlG/nGfF7eXhWQzXar7XlnAoAtALCTkQF5WavRFQBwPF9qnD1UnACwUgmCY2UDtEEK5BdI3gtCCXHPkOTOcTQBJtmglRhIWZcKEANp%2bl7biFWjHKtLYIfzoP/UI1glmEF2sOJ%2bGCngBI/v1KEvgpNq9WsFkbo1WDiB5SNuytHPIQxU//37u7LBnFpAGdCAAdnIgKYfQOGTrIHQ1tmjQr32OB0TCN6JtiaICjPhPcDh/%2blykS3mBluj6Ub6kgFv729aJSbRn88qy2BygHK5foXNATLfVJ5JEZwzQGnxXkCG9nJUl0BxPrHFqEtZ2rm%2bXhWIAXETcALCNgmiUO9kC9mX5oV8gx8CzTg5E3QGrCJDFq4pxoOJARer8Hy5lPlqpc5paBx6rtgAhhUiA2iIshwyDqjP%2bzNkds4zen4cgqyeOkeABDBAddir7iEAq7xbhVhtDldWz1dGhdrPrBb90u7oL721BNm4B0upT4ozxhR/LmJhjC4GM9lJvxHk7e1OGRXpkI4VgN9c45sdNa7t9gAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="1508" height="176" data-srcset="/a-46f08d0/static/tor.82a2fbd.273880f825d780422ecc602ee85e3e02.png 480w, /a-46f08d0/static/tor.cbab2cf.273880f825d780422ecc602ee85e3e02.png 1024w, /a-46f08d0/static/tor.e559bac.273880f825d780422ecc602ee85e3e02.png 1508w" data-sizes="(max-width: 1508px) 100vw, 1508px" data-src="/a-46f08d0/static/tor.e559bac.273880f825d780422ecc602ee85e3e02.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/a-46f08d0/static/tor.e559bac.273880f825d780422ecc602ee85e3e02.png" width="1508" height="176"></noscript></p>
<p>You'll be able to access your server through the <code class="language-text">.onion</code> address from any client device with Tor installed, like the <a href="https://www.torproject.org/download/" target="_blank" rel="nofollow noopener noreferrer">Tor Browser</a> for desktop or <a href="https://play.google.com/store/apps/details?id=org.torproject.android" target="_blank" rel="nofollow noopener noreferrer">Orbot</a> for Android.</p>
<h4 id="non-anonymous-mode"><a href="#non-anonymous-mode" aria-hidden="true"><span class="icon icon-link"></span></a>Non-anonymous mode</h4>
<p>You can set <code class="language-text">TOR_NONANONYMOUS=1</code> to use the <a href="https://2019.www.torproject.org/docs/tor-manual.html.en#HiddenServiceSingleHopMode" target="_blank" rel="nofollow noopener noreferrer">single-hop non-anonymous mode</a>. This will remove the 3 extra hops that protect the server's anonymity, making the connection faster and more reliable. Clients will remain anonymous. Note that this is <a href="https://gitlab.torproject.org/legacy/trac/-/issues/21284" target="_blank" rel="nofollow noopener noreferrer">incompatible</a> with <code class="language-text">BITCOIND_TOR</code>.</p>
<h4 id="options"><a href="#options" aria-hidden="true"><span class="icon icon-link"></span></a>Options</h4>
<ul>
<li><code class="language-text">TOR=0</code> (disabled by default, set to <code class="language-text">1</code> to enable)</li>
<li><code class="language-text">TOR_NONANONYMOUS=0</code> (enable non-anonymous mode)</li>
<li><code class="language-text">TOR_CONFIG=&lt;none&gt;</code> (custom config to append to <code class="language-text">torrc</code>)</li>
<li><code class="language-text">TOR_LOGS=0</code> (display tor's logs in the <code class="language-text">docker run</code> output)</li>
<li><code class="language-text">BITCOIND_TOR=0</code> (connect to the bitcoin network through tor)</li>
<li><code class="language-text">BITCOIND_RPC_ONION=0</code> (expose the bitcoind rpc port over onion)</li>
</ul>
<h4 id="paths"><a href="#paths" aria-hidden="true"><span class="icon icon-link"></span></a>Paths</h4>
<ul>
<li><code class="language-text">/data/tor-hsv</code> (onion service files)</li>
</ul>
<h2 id="dropbear-ssh"><a href="#dropbear-ssh" aria-hidden="true"><span class="icon icon-link"></span></a>🐻 Dropbear SSH</h2>
<p>Lightweight SSH server powered by <a href="https://matt.ucc.asn.au/dropbear/dropbear.html" target="_blank" rel="nofollow noopener noreferrer">Dropbear</a>. For secure remote access via SSH tunnels, using public-key based authentication.</p>
<p>A pair of client and server keys will be generated for you by default. The client's private key that can be used to login will be available in <code class="language-text">/data/ssh-keys/client_rsa</code>.</p>
<p>If you already have a client key that you'd like to use, you can mount the pubkey file into <code class="language-text">/root/id.pub</code> (e.g. <code class="language-text">-v ~/.ssh/id_rsa.pub:/root/id.pub</code>), or mount an <code class="language-text">authorized_keys</code> file into <code class="language-text">/root/.ssh/authorized_keys</code>.</p>
<p>By default, the SSH server permits port tunneling only. Set <code class="language-text">SSHD=UNRESTRICTED</code> to enable shell access, X11 forwarding, agent forwarding and remote port forwarding.</p>
<h4 id="server-set-up"><a href="#server-set-up" aria-hidden="true"><span class="icon icon-link"></span></a>Server set-up</h4>
<p>Enable <code class="language-text">SSHD</code>, publish the SSH port (2222) for remote access and give the container an hostname (to make its virtual IP address easily discoverable from the client).</p>
<pre class="language-bash"><span class="token punctuation">(</span>server<span class="token punctuation">)</span>$ docker run -p <span class="token number">2222</span>:2222 --hostname ez -it <span class="token punctuation">..</span>. eznode/eznode <span class="token assign-left variable">SSHD</span><span class="token operator">=</span><span class="token number">1</span></pre>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1358 211' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4fdd92037010b68dade3088700d9a4dc'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4fdd92037010b68dade3088700d9a4dc)' width='1358' height='211' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAKCAYAAAAEqljUAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFZklEQVRIx41W2ZbiOAytT%2bgiK1tWspAFyEZCoKCgp6b7TJ/5/8%2b5c2Wgq96mH3xsS7IjXV3JeTGmFpxSh5MbMBcG5gsH27pGuSlhz%2bZw/ABZWSJZrxElqZqTLFPrpechp06GF4RY57mSu76PlDZ%2bGMLxfMRpCot3FZsNco4oSeCvVjxXIOD8vFfsU94h98h%2bOp8jiCJlr5sWNA6ZDcv%2b3/Gndi8mAQh6DeFeh%2blodH6F68cHxuMBS9dFTEfGtxP2w4CqaVC3LXZ1hf3hgDWDHMYRb5czA4lwOI4ot1sVcNf3HHsVqMhWDELOdrynH3ola6nPigLNvlNn5f5yu1F3V7SN4hjFw86ezgjIAhbnPwnsT8eLOSMAew1BKwCQCV6At%2bs7hkOP%2bXKJVZzQoQFN1ymnq7Z5zC1SgiPynnrJdFbkKHc7HAiYH/gq2%2bPpyHsc7JoaC8dRbDpfLwSxVsFtaL%2btdkrejwcFRpoJy3LqNkqWcC/J6Al2uk7xbaKRDSYmuoFXTcfEMKAZplrL/Fwrndjon/rXia7OTzRDseTOgO4BwFKH64W43G4MqleOr0jPgU5INltmNaEDxXbHrF8UNYUNTdfCC1eKCZvdFlGaKXDqBzhLgiOz6Jauj5ZBvt%2buOBAcuUeA2x9GdN2Arh2Q5RuyYY8fP3/h4%2bMHk/GGuunRtnsy88zv9dhua9RVy/NXvF9vuFxuOPGuPdl1vl4VwOL3x4%2b/8c%2b/vxR48s0zk/v2flGsCqP4wQCWQNDpsIQBboizODcOKmPRAwCpyTQvVBCylj4hNSwfknqPSPuKWZaM%2biwHYUJDtsTpWpWE7CVw6QNyXkpHZFlZqDNOwHJrlkh7sm7rIK1WWO8DpI2PVb1AXLtKlncR4p2LbB8i630kG%2b7LEEntIckTxUSXfStk%2bch3pMfI92X/7DU5%2b1vI3iIMvzPgSwkoBny//QbA8UNmYGBjylSDOpLei8UCGQO50m5H%2bq54uQCR0eZwOrHWm3sj3ZaqxgUYobTIheLS7ITaki1hUbfvMXOniHoL8Wgi6myEuzniwcZircOvDUSjjqA2scwMuLkFv9HZt2RNm1SH10zIYAOWPYdpS31b%2bPYsgUc5PIcqAV1XZfRZAo0wQJrgE4Be1Z104art0BEEaVASuDTIdbm5U5yBnG/f2SiPzOgWC9djD7mRHez260LRtdxVqqcY9oJnemYlZnPNlTyMEjIoZ1kRsLLCOuU38oolcyTNG75KAU6nd5bHgU2xYIIignjEMMh4Q5xtMY5HFEXFZHTYE8yapRIEK2g6XwJzCl2fcn68DsZj1qZq/bsEBFF9psFzY9bNL5yOb5jNfATeHONORxLaqDOi7too0xmGrQFvaaLb2OhKE%2buIWVtaCD0L11HDhrbbwsTQGHAcC/XG4N7ASKbVfHabnUEbE%2b3ORBhYqEr64Fvoad9SF0VTnjFR8J5qM4XrmthXGnU6ZwO7QkeZm%2bhrDatgCq%2bcIvv5iuSiIfuLjKg4avp9mSA%2bT7A6ctCvcNDUfv3xCr/V8GIt6PThrvDbCSk1RTGyvsYl/K0Nj0HkI43pdEqb9WGCkHRL97yYwMVcr7kO6EgycqaDfsj/ibnF7ElwBqYE2ZL/DYf0XhlYEjgJaDozaWfyibOUzLItzLgXO8N66i3qTXXepVyd5Tyb323lHsumPW1mK97lcbgGbNqoQf0suK8lVtFbTJSydR8lID9CrjjO7DgbDYvilfMETqEpuafktKml1nTVMEUmCC9FTplTGur8kj9UOu%2bc6DafHptPkPyU3MfksRe5rDXzvn7qdPNTp9Zf9E%2bbydezX84pe42z/hjG59C%2b7h/rp%2b1/tjSVozqmZL0AAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1358" height="211" data-srcset="/a-46f08d0/static/ssh.82a2fbd.4bc5e83bb60782a5ec96cd0058699f72.png 480w, /a-46f08d0/static/ssh.cbab2cf.4bc5e83bb60782a5ec96cd0058699f72.png 1024w, /a-46f08d0/static/ssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png 1358w" data-sizes="(max-width: 1358px) 100vw, 1358px" data-src="/a-46f08d0/static/ssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/a-46f08d0/static/ssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png" width="1358" height="211"></noscript></p>
<blockquote>
<p>You might need to open port <code class="language-text">2222</code> on your firewall (e.g. <code class="language-text">ufw allow to any port 2222</code>).</p>
</blockquote>
<h4 id="client-set-up"><a href="#client-set-up" aria-hidden="true"><span class="icon icon-link"></span></a>Client set-up</h4>
<p>Copy the generated client key file from <code class="language-text">~/eznode/ssh-keys/client_rsa</code> on the server to the client machine and setup an SSH tunnel:</p>
<pre class="language-bash"><span class="token punctuation">(</span>client<span class="token punctuation">)</span>$ <span class="token function">ssh</span> -i ./client_rsa -fTN -L <span class="token number">50001</span>:ez:50001 -p <span class="token number">2222</span> root@mynode.com</pre>
<p>You will now be able to access the remote Electrum server through <code class="language-text">localhost:50001</code> on the client.</p>
<blockquote>
<p>Protip: Use <a href="https://medium.com/@gary4est/autossh-port-forwarding-23088d948787" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">autossh</code></a> to automatically restart dropped connections.</p>
</blockquote>
<h4 id="android-setup-with-connectbot"><a href="#android-setup-with-connectbot" aria-hidden="true"><span class="icon icon-link"></span></a>Android setup with ConnectBot</h4>
<details>
 <summary>Expand instructions...</summary>
<p>You can setup an SSH tunnel from Android using the <a href="https://connectbot.org/" target="_blank" rel="nofollow noopener noreferrer">ConnectBot</a> app. Install it and:</p>
<ol>
<li>
<p>Transfer the generated <code class="language-text">client_rsa</code> private key file to your phone, open the app, tap <code class="language-text">⋮</code> > <code class="language-text">Manage Pubkeys</code> > :open_file_folder: and load the key. Long-tap it and select <code class="language-text">Load</code> and <code class="language-text">Load on start</code>.</p>
<blockquote>
<p>Alternatively, you can generate a key with ConnectBot and transfer the public key file to the server.</p>
</blockquote>
</li>
<li>Go back to the main screen, tap <code class="language-text">+</code> to add a new host, set the address to <code class="language-text">root@mynodebox.com:2222</code>, untick <code class="language-text">Start shell session</code>, tick <code class="language-text">Stay connected</code> and save.</li>
<li>Long-tap the host, tap <code class="language-text">Edit port forwards</code>, tap <code class="language-text">+</code>, set <code class="language-text">Source port</code> to the local port to bind on the phone (e.g. <code class="language-text">50001</code>) and <code class="language-text">Destination</code> to <code class="language-text">ez:&lt;port&gt;</code> (e.g. <code class="language-text">ez:50001</code>).</li>
<li>Tap the host to connect and verify the host's key fingerprint. Unfortunately, ConnectBot shows it in (the outdated and insecure) MD5, which you can get by setting <code class="language-text">WEAK_SSH_CHECKSUM=1</code>.</li>
</ol>
<p>You should now be able to access the remote services through <code class="language-text">localhost</code> on your phone.</p>
<blockquote>
<p>⚠️ Note that any app with the <code class="language-text">INTERNET</code> permission will be able to access the local ports. To prevent malicious apps installed on your device from accessing the services, you'll need to enable authentication. BWT has <a href="https://github.com/bwt-dev/bwt/blob/master/doc/auth.md" target="_blank" rel="nofollow noopener noreferrer">experimental support for Electrum authentication</a> that could be used.</p>
</blockquote>
</details>
<h4 id="punch-through-nats-with-a-reverse-ssh-tunnel"><a href="#punch-through-nats-with-a-reverse-ssh-tunnel" aria-hidden="true"><span class="icon icon-link"></span></a>Punch through NATs with a reverse SSH tunnel</h4>
<p>If you're unable to directly accept incoming connections to your server, you can create a reverse tunnel to route traffic through a different server that can.</p>
<p>The server can be any cheap VPS. It doesn't need to run anything apart from an SSH server. It won't see anything apart from encrypted traffic and IP addresses. You will be safe from MITM attacks, as long as you verify the fingerprint the first time you connect.</p>
<details>
 <summary>Expand instructions...</summary>
<p>On the cheap VPS, edit <code class="language-text">/etc/ssh/sshd_config</code>, add (assuming your username is <code class="language-text">satoshi</code>):</p>
<pre class="language-text">Match User satoshi
  GatewayPorts clientspecified</pre>
<p>And reload the SSH server (e.g. <code class="language-text">service ssh reload</code>).</p>
<p>Then, on your eznode host, run:</p>
<pre class="language-bash"><span class="token function">ssh</span> -fTN -R :2222:localhost:2222 satoshi@cheapvps.com</pre>
<p>You will now be able to connect to the eznode SSH server through <code class="language-text">cheapvps.com:2222</code>. You can setup SSH tunnels to the services through it in the same manner explained above.</p>
<blockquote>
<p><a href="https://localhost.run/" target="_blank" rel="nofollow noopener noreferrer">localhost.run</a> offers tunneling as a service for $3.5/month (the free tier isn't suitable because its HTTP-only). It's used with the standard <code class="language-text">ssh</code> client and doesn't require any special software installation. It supports custom domain names.</p>
</blockquote>
</details>
<h4 id="options-1"><a href="#options-1" aria-hidden="true"><span class="icon icon-link"></span></a>Options</h4>
<ul>
<li><code class="language-text">SSHD=0</code> (disabled by default, set to <code class="language-text">1</code> or <code class="language-text">UNRESTRICTED</code> to enable)</li>
<li><code class="language-text">SSHD_LOGS=0</code> (display dropbear's logs in the <code class="language-text">docker run</code> output)</li>
<li><code class="language-text">DROPBEAR_OPTS=&lt;none&gt;</code> (custom CLI options for dropbear)</li>
</ul>
<h4 id="paths-1"><a href="#paths-1" aria-hidden="true"><span class="icon icon-link"></span></a>Paths</h4>
<ul>
<li><code class="language-text">/root/id.pub</code> <code class="language-text">/root/.ssh/authorized_keys</code> (mount from host to use existing client key)</li>
<li><code class="language-text">/data/ssh-keys/client_rsa</code> (generated client key)</li>
<li><code class="language-text">/data/ssh-keys/host_rsa</code> (generate host key)</li>
</ul>
<h4 id="ports"><a href="#ports" aria-hidden="true"><span class="icon icon-link"></span></a>Ports</h4>
<ul>
<li><code class="language-text">2222</code></li>
</ul>
<h2 id="nginx-ssl"><a href="#nginx-ssl" aria-hidden="true"><span class="icon icon-link"></span></a>🔐 NGINX SSL</h2>
<p>NGINX-powered SSL terminating reverse proxy. Provides encryption, but not authentication. SSL relies on central authorities and is best avoided.</p>
<p>To setup, set <code class="language-text">SSL=1</code>, publish the SSL port and make sure to enable authentication:</p>
<pre class="language-bash">docker run -it -p <span class="token number">443</span>:3443 <span class="token punctuation">..</span>. eznode/eznode <span class="token assign-left variable">SSL</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">AUTH_TOKEN</span><span class="token operator">=</span>mySecretPassword</pre>
<p>A private key and a self-signed certificate will be automatically generated and saved to <code class="language-text">/data/ssl-keys/selfsigned.{key,cert}</code>. See <a href="#let-s-encrypt"><em>Let's Encrypt</em></a> below for a CA-signed cert.</p>
<p>The web services will be available on port <code class="language-text">3443</code> under <code class="language-text">/bwt/</code>, <code class="language-text">/explorer/</code> and <code class="language-text">/specter/</code>.</p>
<p>The <em>unauthenticated</em> Electrum SSL server will be available on port <code class="language-text">50002</code>. It should <em>not</em> be exposed directly to the Internet and is meant to be used behind an authentication layer like SSH or Tor.</p>
<p>When <code class="language-text">AUTH_TOKEN</code> is set, NGINX will be configured to authenticate the password before forwarding traffic to the backend web services. This helps protect against zero-day exploits.</p>
<h4 id="options-2"><a href="#options-2" aria-hidden="true"><span class="icon icon-link"></span></a>Options</h4>
<ul>
<li><code class="language-text">SSL=0</code> (disabled by default, set to <code class="language-text">1</code> to enable)</li>
<li><code class="language-text">AUTH_TOKEN=&lt;none&gt;</code> (setup <code class="language-text">htpasswd</code>-based login enforced by nginx)</li>
</ul>
<h4 id="paths-2"><a href="#paths-2" aria-hidden="true"><span class="icon icon-link"></span></a>Paths</h4>
<ul>
<li><code class="language-text">/data/ssl-keys/selfsigned.{key,cert}</code> (keys and certificates)</li>
</ul>
<h4 id="ports-1"><a href="#ports-1" aria-hidden="true"><span class="icon icon-link"></span></a>Ports</h4>
<ul>
<li><code class="language-text">3443</code> (HTTPS)</li>
<li><code class="language-text">50002</code> (Electrum RPC)</li>
</ul>
<h2 id="let-s-encrypt"><a href="#let-s-encrypt" aria-hidden="true"><span class="icon icon-link"></span></a>📜 Let's Encrypt</h2>
<p>To obtain a CA-signed certificate from Let's Encrypt, set <code class="language-text">SSL=1 SSL_DOMAIN=&lt;domain&gt;</code> and publish the HTTP/S ports for remote access, like so:</p>
<pre class="language-bash">docker run -it -p <span class="token number">443</span>:3443 -p <span class="token number">80</span>:8080 <span class="token punctuation">..</span>. eznode/eznode <span class="token assign-left variable">SSL</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">SSL_DOMAIN</span><span class="token operator">=</span>mynodebox.com</pre>
<blockquote>
<p>You might need to open the HTTP/S ports on your firewall (e.g. <code class="language-text">ufw allow to any port 80,443</code>).</p>
</blockquote>
<h4 id="with-existing-webserver"><a href="#with-existing-webserver" aria-hidden="true"><span class="icon icon-link"></span></a>With existing webserver</h4>
<details>
 <summary>Expand instructions...</summary>
<p>Verifying domain ownership for the Let's Encrypt certificate requires accepting connections on port <code class="language-text">80</code>. If you already have a webserver occupying this port, you can configure it to forward verification requests on a subdomain to the ez webserver. Example with NGINX:</p>
<pre class="language-text">server {
    listen 80;
    server_name ez.mynodebox.com;
    location /.well-known/acme-challenge/ { proxy_pass http://localhost:8080; }
}</pre>
<p>Then start docker with <code class="language-text">-p 3443:3443 -p 127.0.0.1:8080:8080</code> and access the SSL server through <code class="language-text">https://ez.mynodebox.com:3443/</code>.</p>
</details>
<h4 id="options-3"><a href="#options-3" aria-hidden="true"><span class="icon icon-link"></span></a>Options</h4>
<ul>
<li><code class="language-text">SSL_DOMAIN=&lt;none&gt;</code> (obtain CA-signed certificate for the given domain)</li>
<li><code class="language-text">LETSENCRYPT_EMAIL=&lt;none&gt;</code> (for renewal and security notices, optional)</li>
<li><code class="language-text">LETSENCRYPT_LOGS=0</code> (display letsencrypt’s logs in the <code class="language-text">docker run</code> output)</li>
</ul>
<h4 id="paths-3"><a href="#paths-3" aria-hidden="true"><span class="icon icon-link"></span></a>Paths</h4>
<ul>
<li><code class="language-text">/data/ssl-keys/letsencrypt</code> (keys and certificates)</li>
</ul>
<h4 id="ports-2"><a href="#ports-2" aria-hidden="true"><span class="icon icon-link"></span></a>Ports</h4>
<ul>
<li><code class="language-text">8080</code> (HTTP, for domain verification)</li>
</ul>
<div class="docs-nav">
<p><a href="packages">← 🎁 Packages</a></p>
<p><a href="node-management">🔧 Node management →</a></p>
</div>
</div><footer data-v-7b73169c data-v-6bdbf9f8><p data-v-7b73169c><a href="https://github.com/ez-org/ezno.de/edit/master/docs/secure-transports.md" data-v-7b73169c>Improve page</a>
    · <a href="https://github.com/ez-org/eznode" data-v-7b73169c>Github</a>
    · <a href="https://twitter.com/eznode_" data-v-7b73169c>Twitter</a>
    · <a href="https://t.me/ez_node" data-v-7b73169c>Telegram</a>
    · <a href="https://webchat.freenode.net/#eznode" data-v-7b73169c>IRC</a>
    · <a href="https://btcpay.shesek.info/" data-v-7b73169c>Donate</a></p><p data-v-7b73169c>Cypherpunks write code.</p></footer></main></div>
    <script>window.__INITIAL_STATE__={"data":{"doc":{"title":"🛡️ Secure transports","path":"\u002Ftransports\u002F","date":"14. March 2021","timeToRead":6,"content":"\u003Ch2 id=\"tor-onion\"\u003E\u003Ca href=\"#tor-onion\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E🧅 Tor Onion\u003C\u002Fh2\u003E\n\u003Cp\u003ETor anonymity network. For secure remote access using onion services and (optionally) for proxying bitcoind.\u003C\u002Fp\u003E\n\u003Cp\u003EOnion services provide strong encryption and mutual authentication established based on information embedded into the \u003Ccode class=\"language-text\"\u003E.onion\u003C\u002Fcode\u003E hostname. It does not require setting up port forwarding.\u003C\u002Fp\u003E\n\u003Cp\u003EThe onion service files, including secret key material, will be kept in \u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Ftor-hsv\u003C\u002Fcode\u003E. If you lose them you'll lose your \u003Ccode class=\"language-text\"\u003E.onion\u003C\u002Fcode\u003E address.\u003C\u002Fp\u003E\n\u003Ch4 id=\"setting-up\"\u003E\u003Ca href=\"#setting-up\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESetting up\u003C\u002Fh4\u003E\n\u003Cp\u003EStart with \u003Ccode class=\"language-text\"\u003ETOR=1\u003C\u002Fcode\u003E. The \u003Ccode class=\"language-text\"\u003E.onion\u003C\u002Fcode\u003E hostname will be shown on startup.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 1508 176' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b00742493f19c1c9677d28e877d08640'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b00742493f19c1c9677d28e877d08640)' width='1508' height='176' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAHCAYAAAC4NEsKAAAACXBIWXMAAC4jAAAuIwF4pT92AAADc0lEQVQ4y31U6W7TYBDsIwCp7bY5nKOO7fiO7yMJaUsFgvd\u002FnWVmLUeAKn58%2bq49Z2f3zrAssZZYC0t4ni9XuqzHJ11Pi6U8zhfjvlj89Taexz%2be%2bTauucryPDNMuTet2zKsh\u002F\u002Fe\u002F138\u002F0hnevto\u002F0jnI38831lLU5x%2bJpv8XownQ%2bqul7bvxF6vZfP8LP1pkCQ7SpqlkhWlZMejHKJIDmEojuvJscglL0vZe66keY57IXGaSpQk%2brdY2TeAzIdHdcz94Wl%2bu09gM6DpPP0bfyQ16U1JUI473\u002F4Gwbr9swj8n\u002Fz\u002FC9CdObdkW8zEjg0xHg0pqlqavhV7swEAjpRVKQmSDuMIAOSanHs4SHrMJK8q8Q6%2bJlnUlTRdp7Kny\u002FkGRNW2UreNhAkAzPH39SL9MMj19UWOZaF6EeSarlUd7j7ATbJEyqZBQVrpzyepmlpK2KJfFqWsa\u002FgvEW%2blPivIMsYozdROArkwjuXHr58yQD9KYlmtN\u002FLpy0w%2bz4w\u002FGADq76qZrJN7BSAHAHS2tG3Z7V3p4Ix31\u002Fc1eCbsBQECHBnhBwdtGSbDIPaep44ZvCYFdjQAgOyI00QBKRB4jgQiBNwNHUCo5fr2Ap16BC7LYKvCfQSPb7RJ%2bzy3Q6\u002FJV\u002FijDsGoVC7X%2bAk0\u002FTO2GOwlG\u002FnGfF7eXhWQzXar7XlnAoAtALCTkQF5WavRFQBwPF9qnD1UnACwUgmCY2UDtEEK5BdI3gtCCXHPkOTOcTQBJtmglRhIWZcKEANp%2bl7biFWjHKtLYIfzoP\u002FUI1glmEF2sOJ%2bGCngBI\u002Fv1KEvgpNq9WsFkbo1WDiB5SNuytHPIQxU\u002F\u002F37u7LBnFpAGdCAAdnIgKYfQOGTrIHQ1tmjQr32OB0TCN6JtiaICjPhPcDh\u002F%2blykS3mBluj6Ub6kgFv729aJSbRn88qy2BygHK5foXNATLfVJ5JEZwzQGnxXkCG9nJUl0BxPrHFqEtZ2rm%2bXhWIAXETcALCNgmiUO9kC9mX5oV8gx8CzTg5E3QGrCJDFq4pxoOJARer8Hy5lPlqpc5paBx6rtgAhhUiA2iIshwyDqjP%2bzNkds4zen4cgqyeOkeABDBAddir7iEAq7xbhVhtDldWz1dGhdrPrBb90u7oL721BNm4B0upT4ozxhR\u002FLmJhjC4GM9lJvxHk7e1OGRXpkI4VgN9c45sdNa7t9gAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e\" width=\"1508\" height=\"176\" data-srcset=\"\u002Fa-46f08d0\u002Fstatic\u002Ftor.82a2fbd.273880f825d780422ecc602ee85e3e02.png 480w, \u002Fa-46f08d0\u002Fstatic\u002Ftor.cbab2cf.273880f825d780422ecc602ee85e3e02.png 1024w, \u002Fa-46f08d0\u002Fstatic\u002Ftor.e559bac.273880f825d780422ecc602ee85e3e02.png 1508w\" data-sizes=\"(max-width: 1508px) 100vw, 1508px\" data-src=\"\u002Fa-46f08d0\u002Fstatic\u002Ftor.e559bac.273880f825d780422ecc602ee85e3e02.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fa-46f08d0\u002Fstatic\u002Ftor.e559bac.273880f825d780422ecc602ee85e3e02.png\" width=\"1508\" height=\"176\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EYou'll be able to access your server through the \u003Ccode class=\"language-text\"\u003E.onion\u003C\u002Fcode\u003E address from any client device with Tor installed, like the \u003Ca href=\"https:\u002F\u002Fwww.torproject.org\u002Fdownload\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ETor Browser\u003C\u002Fa\u003E for desktop or \u003Ca href=\"https:\u002F\u002Fplay.google.com\u002Fstore\u002Fapps\u002Fdetails?id=org.torproject.android\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EOrbot\u003C\u002Fa\u003E for Android.\u003C\u002Fp\u003E\n\u003Ch4 id=\"non-anonymous-mode\"\u003E\u003Ca href=\"#non-anonymous-mode\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ENon-anonymous mode\u003C\u002Fh4\u003E\n\u003Cp\u003EYou can set \u003Ccode class=\"language-text\"\u003ETOR_NONANONYMOUS=1\u003C\u002Fcode\u003E to use the \u003Ca href=\"https:\u002F\u002F2019.www.torproject.org\u002Fdocs\u002Ftor-manual.html.en#HiddenServiceSingleHopMode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Esingle-hop non-anonymous mode\u003C\u002Fa\u003E. This will remove the 3 extra hops that protect the server's anonymity, making the connection faster and more reliable. Clients will remain anonymous. Note that this is \u003Ca href=\"https:\u002F\u002Fgitlab.torproject.org\u002Flegacy\u002Ftrac\u002F-\u002Fissues\u002F21284\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Eincompatible\u003C\u002Fa\u003E with \u003Ccode class=\"language-text\"\u003EBITCOIND_TOR\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch4 id=\"options\"\u003E\u003Ca href=\"#options\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOptions\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ETOR=0\u003C\u002Fcode\u003E (disabled by default, set to \u003Ccode class=\"language-text\"\u003E1\u003C\u002Fcode\u003E to enable)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ETOR_NONANONYMOUS=0\u003C\u002Fcode\u003E (enable non-anonymous mode)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ETOR_CONFIG=&lt;none&gt;\u003C\u002Fcode\u003E (custom config to append to \u003Ccode class=\"language-text\"\u003Etorrc\u003C\u002Fcode\u003E)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ETOR_LOGS=0\u003C\u002Fcode\u003E (display tor's logs in the \u003Ccode class=\"language-text\"\u003Edocker run\u003C\u002Fcode\u003E output)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003EBITCOIND_TOR=0\u003C\u002Fcode\u003E (connect to the bitcoin network through tor)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003EBITCOIND_RPC_ONION=0\u003C\u002Fcode\u003E (expose the bitcoind rpc port over onion)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"paths\"\u003E\u003Ca href=\"#paths\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPaths\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Ftor-hsv\u003C\u002Fcode\u003E (onion service files)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"dropbear-ssh\"\u003E\u003Ca href=\"#dropbear-ssh\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E🐻 Dropbear SSH\u003C\u002Fh2\u003E\n\u003Cp\u003ELightweight SSH server powered by \u003Ca href=\"https:\u002F\u002Fmatt.ucc.asn.au\u002Fdropbear\u002Fdropbear.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EDropbear\u003C\u002Fa\u003E. For secure remote access via SSH tunnels, using public-key based authentication.\u003C\u002Fp\u003E\n\u003Cp\u003EA pair of client and server keys will be generated for you by default. The client's private key that can be used to login will be available in \u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssh-keys\u002Fclient_rsa\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EIf you already have a client key that you'd like to use, you can mount the pubkey file into \u003Ccode class=\"language-text\"\u003E\u002Froot\u002Fid.pub\u003C\u002Fcode\u003E (e.g. \u003Ccode class=\"language-text\"\u003E-v ~\u002F.ssh\u002Fid_rsa.pub:\u002Froot\u002Fid.pub\u003C\u002Fcode\u003E), or mount an \u003Ccode class=\"language-text\"\u003Eauthorized_keys\u003C\u002Fcode\u003E file into \u003Ccode class=\"language-text\"\u003E\u002Froot\u002F.ssh\u002Fauthorized_keys\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EBy default, the SSH server permits port tunneling only. Set \u003Ccode class=\"language-text\"\u003ESSHD=UNRESTRICTED\u003C\u002Fcode\u003E to enable shell access, X11 forwarding, agent forwarding and remote port forwarding.\u003C\u002Fp\u003E\n\u003Ch4 id=\"server-set-up\"\u003E\u003Ca href=\"#server-set-up\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EServer set-up\u003C\u002Fh4\u003E\n\u003Cp\u003EEnable \u003Ccode class=\"language-text\"\u003ESSHD\u003C\u002Fcode\u003E, publish the SSH port (2222) for remote access and give the container an hostname (to make its virtual IP address easily discoverable from the client).\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserver\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E$ docker run -p \u003Cspan class=\"token number\"\u003E2222\u003C\u002Fspan\u003E:2222 --hostname ez -it \u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E. eznode\u002Feznode \u003Cspan class=\"token assign-left variable\"\u003ESSHD\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 1358 211' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4fdd92037010b68dade3088700d9a4dc'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4fdd92037010b68dade3088700d9a4dc)' width='1358' height='211' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAKCAYAAAAEqljUAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFZklEQVRIx41W2ZbiOAytT%2bgiK1tWspAFyEZCoKCgp6b7TJ\u002F5\u002F8%2b5c2Wgq96mH3xsS7IjXV3JeTGmFpxSh5MbMBcG5gsH27pGuSlhz%2bZw\u002FABZWSJZrxElqZqTLFPrpechp06GF4RY57mSu76PlDZ%2bGMLxfMRpCot3FZsNco4oSeCvVjxXIOD8vFfsU94h98h%2bOp8jiCJlr5sWNA6ZDcv%2b3\u002FGndi8mAQh6DeFeh%2blodH6F68cHxuMBS9dFTEfGtxP2w4CqaVC3LXZ1hf3hgDWDHMYRb5czA4lwOI4ot1sVcNf3HHsVqMhWDELOdrynH3ola6nPigLNvlNn5f5yu1F3V7SN4hjFw86ezgjIAhbnPwnsT8eLOSMAew1BKwCQCV6At%2bs7hkOP%2bXKJVZzQoQFN1ymnq7Z5zC1SgiPynnrJdFbkKHc7HAiYH\u002Fgq2%2bPpyHsc7JoaC8dRbDpfLwSxVsFtaL%2btdkrejwcFRpoJy3LqNkqWcC\u002FJ6Al2uk7xbaKRDSYmuoFXTcfEMKAZplrL\u002FFwrndjon\u002FrXia7OTzRDseTOgO4BwFKH64W43G4MqleOr0jPgU5INltmNaEDxXbHrF8UNYUNTdfCC1eKCZvdFlGaKXDqBzhLgiOz6Jauj5ZBvt%2buOBAcuUeA2x9GdN2Arh2Q5RuyYY8fP3\u002Fh4%2bMHk\u002FGGuunRtnsy88zv9dhua9RVy\u002FNXvF9vuFxuOPGuPdl1vl4VwOL3x4%2b\u002F8c%2b\u002FvxR48s0zk\u002Fv2flGsCqP4wQCWQNDpsIQBboizODcOKmPRAwCpyTQvVBCylj4hNSwfknqPSPuKWZaM%2biwHYUJDtsTpWpWE7CVw6QNyXkpHZFlZqDNOwHJrlkh7sm7rIK1WWO8DpI2PVb1AXLtKlncR4p2LbB8i630kG%2b7LEEntIckTxUSXfStk%2bch3pMfI92X\u002F7DU5%2b1vI3iIMvzPgSwkoBny\u002F\u002FQbA8UNmYGBjylSDOpLei8UCGQO50m5H%2bq54uQCR0eZwOrHWm3sj3ZaqxgUYobTIheLS7ITaki1hUbfvMXOniHoL8Wgi6myEuzniwcZircOvDUSjjqA2scwMuLkFv9HZt2RNm1SH10zIYAOWPYdpS31b%2bPYsgUc5PIcqAV1XZfRZAo0wQJrgE4Be1Z104art0BEEaVASuDTIdbm5U5yBnG\u002Ff2SiPzOgWC9djD7mRHez260LRtdxVqqcY9oJnemYlZnPNlTyMEjIoZ1kRsLLCOuU38oolcyTNG75KAU6nd5bHgU2xYIIignjEMMh4Q5xtMY5HFEXFZHTYE8yapRIEK2g6XwJzCl2fcn68DsZj1qZq\u002FbsEBFF9psFzY9bNL5yOb5jNfATeHONORxLaqDOi7too0xmGrQFvaaLb2OhKE%2buIWVtaCD0L11HDhrbbwsTQGHAcC\u002FXG4N7ASKbVfHabnUEbE%2b3ORBhYqEr64Fvoad9SF0VTnjFR8J5qM4XrmthXGnU6ZwO7QkeZm%2bhrDatgCq%2bcIvv5iuSiIfuLjKg4avp9mSA%2bT7A6ctCvcNDUfv3xCr\u002FV8GIt6PThrvDbCSk1RTGyvsYl\u002FK0Nj0HkI43pdEqb9WGCkHRL97yYwMVcr7kO6EgycqaDfsj\u002FibnF7ElwBqYE2ZL\u002FDYf0XhlYEjgJaDozaWfyibOUzLItzLgXO8N66i3qTXXepVyd5Tyb323lHsumPW1mK97lcbgGbNqoQf0suK8lVtFbTJSydR8lID9CrjjO7DgbDYvilfMETqEpuafktKml1nTVMEUmCC9FTplTGur8kj9UOu%2bc6DafHptPkPyU3MfksRe5rDXzvn7qdPNTp9Zf9E%2bbydezX84pe42z\u002FhjG59C%2b7h\u002Frp%2b1\u002FtjSVozqmZL0AAAAASUVORK5CYII=' \u002F%3e%3c\u002Fsvg%3e\" width=\"1358\" height=\"211\" data-srcset=\"\u002Fa-46f08d0\u002Fstatic\u002Fssh.82a2fbd.4bc5e83bb60782a5ec96cd0058699f72.png 480w, \u002Fa-46f08d0\u002Fstatic\u002Fssh.cbab2cf.4bc5e83bb60782a5ec96cd0058699f72.png 1024w, \u002Fa-46f08d0\u002Fstatic\u002Fssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png 1358w\" data-sizes=\"(max-width: 1358px) 100vw, 1358px\" data-src=\"\u002Fa-46f08d0\u002Fstatic\u002Fssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fa-46f08d0\u002Fstatic\u002Fssh.94dd11e.4bc5e83bb60782a5ec96cd0058699f72.png\" width=\"1358\" height=\"211\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EYou might need to open port \u003Ccode class=\"language-text\"\u003E2222\u003C\u002Fcode\u003E on your firewall (e.g. \u003Ccode class=\"language-text\"\u003Eufw allow to any port 2222\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch4 id=\"client-set-up\"\u003E\u003Ca href=\"#client-set-up\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EClient set-up\u003C\u002Fh4\u003E\n\u003Cp\u003ECopy the generated client key file from \u003Ccode class=\"language-text\"\u003E~\u002Feznode\u002Fssh-keys\u002Fclient_rsa\u003C\u002Fcode\u003E on the server to the client machine and setup an SSH tunnel:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eclient\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E$ \u003Cspan class=\"token function\"\u003Essh\u003C\u002Fspan\u003E -i .\u002Fclient_rsa -fTN -L \u003Cspan class=\"token number\"\u003E50001\u003C\u002Fspan\u003E:ez:50001 -p \u003Cspan class=\"token number\"\u003E2222\u003C\u002Fspan\u003E root@mynode.com\u003C\u002Fpre\u003E\n\u003Cp\u003EYou will now be able to access the remote Electrum server through \u003Ccode class=\"language-text\"\u003Elocalhost:50001\u003C\u002Fcode\u003E on the client.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EProtip: Use \u003Ca href=\"https:\u002F\u002Fmedium.com\u002F@gary4est\u002Fautossh-port-forwarding-23088d948787\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E\u003Ccode class=\"language-text\"\u003Eautossh\u003C\u002Fcode\u003E\u003C\u002Fa\u003E to automatically restart dropped connections.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch4 id=\"android-setup-with-connectbot\"\u003E\u003Ca href=\"#android-setup-with-connectbot\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndroid setup with ConnectBot\u003C\u002Fh4\u003E\n\u003Cdetails\u003E\n \u003Csummary\u003EExpand instructions...\u003C\u002Fsummary\u003E\n\u003Cp\u003EYou can setup an SSH tunnel from Android using the \u003Ca href=\"https:\u002F\u002Fconnectbot.org\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EConnectBot\u003C\u002Fa\u003E app. Install it and:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003ETransfer the generated \u003Ccode class=\"language-text\"\u003Eclient_rsa\u003C\u002Fcode\u003E private key file to your phone, open the app, tap \u003Ccode class=\"language-text\"\u003E⋮\u003C\u002Fcode\u003E \u003E \u003Ccode class=\"language-text\"\u003EManage Pubkeys\u003C\u002Fcode\u003E \u003E :open_file_folder: and load the key. Long-tap it and select \u003Ccode class=\"language-text\"\u003ELoad\u003C\u002Fcode\u003E and \u003Ccode class=\"language-text\"\u003ELoad on start\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EAlternatively, you can generate a key with ConnectBot and transfer the public key file to the server.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EGo back to the main screen, tap \u003Ccode class=\"language-text\"\u003E+\u003C\u002Fcode\u003E to add a new host, set the address to \u003Ccode class=\"language-text\"\u003Eroot@mynodebox.com:2222\u003C\u002Fcode\u003E, untick \u003Ccode class=\"language-text\"\u003EStart shell session\u003C\u002Fcode\u003E, tick \u003Ccode class=\"language-text\"\u003EStay connected\u003C\u002Fcode\u003E and save.\u003C\u002Fli\u003E\n\u003Cli\u003ELong-tap the host, tap \u003Ccode class=\"language-text\"\u003EEdit port forwards\u003C\u002Fcode\u003E, tap \u003Ccode class=\"language-text\"\u003E+\u003C\u002Fcode\u003E, set \u003Ccode class=\"language-text\"\u003ESource port\u003C\u002Fcode\u003E to the local port to bind on the phone (e.g. \u003Ccode class=\"language-text\"\u003E50001\u003C\u002Fcode\u003E) and \u003Ccode class=\"language-text\"\u003EDestination\u003C\u002Fcode\u003E to \u003Ccode class=\"language-text\"\u003Eez:&lt;port&gt;\u003C\u002Fcode\u003E (e.g. \u003Ccode class=\"language-text\"\u003Eez:50001\u003C\u002Fcode\u003E).\u003C\u002Fli\u003E\n\u003Cli\u003ETap the host to connect and verify the host's key fingerprint. Unfortunately, ConnectBot shows it in (the outdated and insecure) MD5, which you can get by setting \u003Ccode class=\"language-text\"\u003EWEAK_SSH_CHECKSUM=1\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EYou should now be able to access the remote services through \u003Ccode class=\"language-text\"\u003Elocalhost\u003C\u002Fcode\u003E on your phone.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E⚠️ Note that any app with the \u003Ccode class=\"language-text\"\u003EINTERNET\u003C\u002Fcode\u003E permission will be able to access the local ports. To prevent malicious apps installed on your device from accessing the services, you'll need to enable authentication. BWT has \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fbwt-dev\u002Fbwt\u002Fblob\u002Fmaster\u002Fdoc\u002Fauth.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Eexperimental support for Electrum authentication\u003C\u002Fa\u003E that could be used.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003C\u002Fdetails\u003E\n\u003Ch4 id=\"punch-through-nats-with-a-reverse-ssh-tunnel\"\u003E\u003Ca href=\"#punch-through-nats-with-a-reverse-ssh-tunnel\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPunch through NATs with a reverse SSH tunnel\u003C\u002Fh4\u003E\n\u003Cp\u003EIf you're unable to directly accept incoming connections to your server, you can create a reverse tunnel to route traffic through a different server that can.\u003C\u002Fp\u003E\n\u003Cp\u003EThe server can be any cheap VPS. It doesn't need to run anything apart from an SSH server. It won't see anything apart from encrypted traffic and IP addresses. You will be safe from MITM attacks, as long as you verify the fingerprint the first time you connect.\u003C\u002Fp\u003E\n\u003Cdetails\u003E\n \u003Csummary\u003EExpand instructions...\u003C\u002Fsummary\u003E\n\u003Cp\u003EOn the cheap VPS, edit \u003Ccode class=\"language-text\"\u003E\u002Fetc\u002Fssh\u002Fsshd_config\u003C\u002Fcode\u003E, add (assuming your username is \u003Ccode class=\"language-text\"\u003Esatoshi\u003C\u002Fcode\u003E):\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003EMatch User satoshi\n  GatewayPorts clientspecified\u003C\u002Fpre\u003E\n\u003Cp\u003EAnd reload the SSH server (e.g. \u003Ccode class=\"language-text\"\u003Eservice ssh reload\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\n\u003Cp\u003EThen, on your eznode host, run:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Cspan class=\"token function\"\u003Essh\u003C\u002Fspan\u003E -fTN -R :2222:localhost:2222 satoshi@cheapvps.com\u003C\u002Fpre\u003E\n\u003Cp\u003EYou will now be able to connect to the eznode SSH server through \u003Ccode class=\"language-text\"\u003Echeapvps.com:2222\u003C\u002Fcode\u003E. You can setup SSH tunnels to the services through it in the same manner explained above.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flocalhost.run\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Elocalhost.run\u003C\u002Fa\u003E offers tunneling as a service for $3.5\u002Fmonth (the free tier isn't suitable because its HTTP-only). It's used with the standard \u003Ccode class=\"language-text\"\u003Essh\u003C\u002Fcode\u003E client and doesn't require any special software installation. It supports custom domain names.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003C\u002Fdetails\u003E\n\u003Ch4 id=\"options-1\"\u003E\u003Ca href=\"#options-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOptions\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ESSHD=0\u003C\u002Fcode\u003E (disabled by default, set to \u003Ccode class=\"language-text\"\u003E1\u003C\u002Fcode\u003E or \u003Ccode class=\"language-text\"\u003EUNRESTRICTED\u003C\u002Fcode\u003E to enable)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ESSHD_LOGS=0\u003C\u002Fcode\u003E (display dropbear's logs in the \u003Ccode class=\"language-text\"\u003Edocker run\u003C\u002Fcode\u003E output)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003EDROPBEAR_OPTS=&lt;none&gt;\u003C\u002Fcode\u003E (custom CLI options for dropbear)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"paths-1\"\u003E\u003Ca href=\"#paths-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPaths\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Froot\u002Fid.pub\u003C\u002Fcode\u003E \u003Ccode class=\"language-text\"\u003E\u002Froot\u002F.ssh\u002Fauthorized_keys\u003C\u002Fcode\u003E (mount from host to use existing client key)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssh-keys\u002Fclient_rsa\u003C\u002Fcode\u003E (generated client key)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssh-keys\u002Fhost_rsa\u003C\u002Fcode\u003E (generate host key)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"ports\"\u003E\u003Ca href=\"#ports\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPorts\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E2222\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"nginx-ssl\"\u003E\u003Ca href=\"#nginx-ssl\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E🔐 NGINX SSL\u003C\u002Fh2\u003E\n\u003Cp\u003ENGINX-powered SSL terminating reverse proxy. Provides encryption, but not authentication. SSL relies on central authorities and is best avoided.\u003C\u002Fp\u003E\n\u003Cp\u003ETo setup, set \u003Ccode class=\"language-text\"\u003ESSL=1\u003C\u002Fcode\u003E, publish the SSL port and make sure to enable authentication:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003Edocker run -it -p \u003Cspan class=\"token number\"\u003E443\u003C\u002Fspan\u003E:3443 \u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E. eznode\u002Feznode \u003Cspan class=\"token assign-left variable\"\u003ESSL\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003EAUTH_TOKEN\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003EmySecretPassword\u003C\u002Fpre\u003E\n\u003Cp\u003EA private key and a self-signed certificate will be automatically generated and saved to \u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssl-keys\u002Fselfsigned.{key,cert}\u003C\u002Fcode\u003E. See \u003Ca href=\"#let-s-encrypt\"\u003E\u003Cem\u003ELet's Encrypt\u003C\u002Fem\u003E\u003C\u002Fa\u003E below for a CA-signed cert.\u003C\u002Fp\u003E\n\u003Cp\u003EThe web services will be available on port \u003Ccode class=\"language-text\"\u003E3443\u003C\u002Fcode\u003E under \u003Ccode class=\"language-text\"\u003E\u002Fbwt\u002F\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003E\u002Fexplorer\u002F\u003C\u002Fcode\u003E and \u003Ccode class=\"language-text\"\u003E\u002Fspecter\u002F\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EThe \u003Cem\u003Eunauthenticated\u003C\u002Fem\u003E Electrum SSL server will be available on port \u003Ccode class=\"language-text\"\u003E50002\u003C\u002Fcode\u003E. It should \u003Cem\u003Enot\u003C\u002Fem\u003E be exposed directly to the Internet and is meant to be used behind an authentication layer like SSH or Tor.\u003C\u002Fp\u003E\n\u003Cp\u003EWhen \u003Ccode class=\"language-text\"\u003EAUTH_TOKEN\u003C\u002Fcode\u003E is set, NGINX will be configured to authenticate the password before forwarding traffic to the backend web services. This helps protect against zero-day exploits.\u003C\u002Fp\u003E\n\u003Ch4 id=\"options-2\"\u003E\u003Ca href=\"#options-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOptions\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ESSL=0\u003C\u002Fcode\u003E (disabled by default, set to \u003Ccode class=\"language-text\"\u003E1\u003C\u002Fcode\u003E to enable)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003EAUTH_TOKEN=&lt;none&gt;\u003C\u002Fcode\u003E (setup \u003Ccode class=\"language-text\"\u003Ehtpasswd\u003C\u002Fcode\u003E-based login enforced by nginx)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"paths-2\"\u003E\u003Ca href=\"#paths-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPaths\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssl-keys\u002Fselfsigned.{key,cert}\u003C\u002Fcode\u003E (keys and certificates)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"ports-1\"\u003E\u003Ca href=\"#ports-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPorts\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E3443\u003C\u002Fcode\u003E (HTTPS)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E50002\u003C\u002Fcode\u003E (Electrum RPC)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"let-s-encrypt\"\u003E\u003Ca href=\"#let-s-encrypt\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E📜 Let's Encrypt\u003C\u002Fh2\u003E\n\u003Cp\u003ETo obtain a CA-signed certificate from Let's Encrypt, set \u003Ccode class=\"language-text\"\u003ESSL=1 SSL_DOMAIN=&lt;domain&gt;\u003C\u002Fcode\u003E and publish the HTTP\u002FS ports for remote access, like so:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003Edocker run -it -p \u003Cspan class=\"token number\"\u003E443\u003C\u002Fspan\u003E:3443 -p \u003Cspan class=\"token number\"\u003E80\u003C\u002Fspan\u003E:8080 \u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E. eznode\u002Feznode \u003Cspan class=\"token assign-left variable\"\u003ESSL\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003ESSL_DOMAIN\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Emynodebox.com\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EYou might need to open the HTTP\u002FS ports on your firewall (e.g. \u003Ccode class=\"language-text\"\u003Eufw allow to any port 80,443\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch4 id=\"with-existing-webserver\"\u003E\u003Ca href=\"#with-existing-webserver\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWith existing webserver\u003C\u002Fh4\u003E\n\u003Cdetails\u003E\n \u003Csummary\u003EExpand instructions...\u003C\u002Fsummary\u003E\n\u003Cp\u003EVerifying domain ownership for the Let's Encrypt certificate requires accepting connections on port \u003Ccode class=\"language-text\"\u003E80\u003C\u002Fcode\u003E. If you already have a webserver occupying this port, you can configure it to forward verification requests on a subdomain to the ez webserver. Example with NGINX:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003Eserver {\n    listen 80;\n    server_name ez.mynodebox.com;\n    location \u002F.well-known\u002Facme-challenge\u002F { proxy_pass http:\u002F\u002Flocalhost:8080; }\n}\u003C\u002Fpre\u003E\n\u003Cp\u003EThen start docker with \u003Ccode class=\"language-text\"\u003E-p 3443:3443 -p 127.0.0.1:8080:8080\u003C\u002Fcode\u003E and access the SSL server through \u003Ccode class=\"language-text\"\u003Ehttps:\u002F\u002Fez.mynodebox.com:3443\u002F\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fdetails\u003E\n\u003Ch4 id=\"options-3\"\u003E\u003Ca href=\"#options-3\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOptions\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ESSL_DOMAIN=&lt;none&gt;\u003C\u002Fcode\u003E (obtain CA-signed certificate for the given domain)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ELETSENCRYPT_EMAIL=&lt;none&gt;\u003C\u002Fcode\u003E (for renewal and security notices, optional)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003ELETSENCRYPT_LOGS=0\u003C\u002Fcode\u003E (display letsencrypt’s logs in the \u003Ccode class=\"language-text\"\u003Edocker run\u003C\u002Fcode\u003E output)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"paths-3\"\u003E\u003Ca href=\"#paths-3\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPaths\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E\u002Fdata\u002Fssl-keys\u002Fletsencrypt\u003C\u002Fcode\u003E (keys and certificates)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"ports-2\"\u003E\u003Ca href=\"#ports-2\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPorts\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003E8080\u003C\u002Fcode\u003E (HTTP, for domain verification)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cdiv class=\"docs-nav\"\u003E\n\u003Cp\u003E\u003Ca href=\"packages\"\u003E← 🎁 Packages\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"node-management\"\u003E🔧 Node management →\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n","fileInfo":{"path":"docs\u002Fsecure-transports.md"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/a-46f08d0/js/app.bd2b35c9.js" defer></script><script src="/a-46f08d0/js/page--src--templates--doc-vue.5122f0d2.js" defer></script>
  </body>
</html>
