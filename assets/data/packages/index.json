{"hash":"eb5bd9664b0e78f27af61cbd7667806b2173d94a","data":{"doc":{"title":"üéÅ Packages","path":"/packages/","date":"16. March 2021","timeToRead":6,"content":"<h2 id=\"bitcoin-core\"><a href=\"#bitcoin-core\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>‚Çø Bitcoin Core</h2>\n<p>Full bitcoin node. <a href=\"getting-started#pruning\">Pruned</a> by default.</p>\n<h4 id=\"fast-sync\"><a href=\"#fast-sync\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fast sync</h4>\n<p>To enable fast-sync, set <code class=\"language-text\">TRUSTED_FASTSYNC=1</code>. This will download a recent pruned datadir snapshot from <a href=\"https://prunednode.today/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">prunednode.today</a> and start syncing from that instead of from scratch.</p>\n<p>This can get your node synced up 10-60 minutes (depending on how recent the snapshot is), but requires ‚ö† <strong>trusting</strong> the distributor of the snapshot. A malicious distributor could <em>feed you with invalid chain history and lead you to accept fake coins</em>. Please consider waiting some more for a full sync to avoid taking this risk.</p>\n<p>A fast-synced node <a href=\"getting-started#pruning\">is not able</a> to scan for historical wallet transactions and can therefore only be used with newly created wallets.</p>\n<p><a href=\"https://prunednode.today/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">prunednode.today</a> is maintained by the <a href=\"https://github.com/cryptoadvance/specter-desktop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Specter Desktop</a> team and signed by <a href=\"https://stepansnigirev.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Stepan Snigirev</a>.</p>\n<blockquote>\n<p>You'll need 10G of free space during the setup to store both the snapshot <code class=\"language-text\">.zip</code> file and the files extracted from it. It will shrink down to &#x3C;5GB when the process completes.</p>\n</blockquote>\n<h4 id=\"using-existing-full-node\"><a href=\"#using-existing-full-node\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Using existing full node</h4>\n<details>\n <summary>Expand instructions...</summary>\n<p>If you already have a Bitcoin Core instance running on the same machine, you can connect eznode to it using cookie authentication by mounting the datadir into <code class=\"language-text\">/bitcoin</code>:</p>\n<pre class=\"language-bash\">docker run -v ~/.bitcoin:/bitcoin:ro -it <span class=\"token punctuation\">..</span>. eznode/eznode</pre>\n<blockquote>\n<p>On Linux, you'll need to add <code class=\"language-text\">--add-host host.docker.internal:host-gateway</code> to make the host's address discoverable from within the container. On Windows, change <code class=\"language-text\">~/.bitcoin</code> to <code class=\"language-text\">$env:AppData\\Bitcoin</code>.</p>\n</blockquote>\n<p>Instructions for modifying bitcoind's <code class=\"language-text\">rpcbind</code>/<code class=\"language-text\">rpcallowip</code> config will be shown on startup. If you're running into trouble with Docker's virtual networking, you can try with <a href=\"https://docs.docker.com/network/host/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">--net host</code></a> (this should ideally be avoided).</p>\n<p>If your node is running remotely, you can configure its URL and RPC credentials with <code class=\"language-text\">BITCOIND_URL=http://my-bitcoind-server:8332/ BITCOIND_AUTH=satoshi:mySecretPassword</code>.</p>\n</details>\n<h4 id=\"accessing-managed-full-node\"><a href=\"#accessing-managed-full-node\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Accessing managed full node</h4>\n<details>\n <summary>Expand instructions...</summary>\n<p>To issue RPC commands against eznode's managed Bitcoin Core instance, use <code class=\"language-text\">docker exec ez bitcoin-cli &lt;command&gt;</code> (see <a href=\"server-management\"><em>Server management</em></a>).</p>\n<p>To connect to the Bitcoin Core RPC from your host, set <code class=\"language-text\">BITCOIND_RPC_ACCESS=&lt;user:pwd&gt;</code> to open the RPC server for external access using password-based authentication.</p>\n<p>On macOS/Windows, you'll also need to publish the RPC port with <code class=\"language-text\">-p 127.0.0.1:8332:8332</code> to make it available through <code class=\"language-text\">localhost</code>. On Linux you can access it directly through the container's IP address or using the <code class=\"language-text\">ez</code> alias (see <a href=\"accessing#connecting-locally\"><em>Connecting Locally</em></a>).</p>\n<p>If you'd like to access the RPC remotely, set <code class=\"language-text\">BITCOIND_RPC_ONION</code> to expose it through an <a href=\"transports#tor-onion\">onion service</a> or setup an <a href=\"transports#dropbear-ssh\">SSH tunnel</a>.</p>\n</details>\n<h4 id=\"options-for-managed-full-node\"><a href=\"#options-for-managed-full-node\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Options for managed full node</h4>\n<ul>\n<li><code class=\"language-text\">PRUNE=550</code> (set to <code class=\"language-text\">0</code> to disable pruning)</li>\n<li><code class=\"language-text\">PRUNE_UNTIL=&lt;height|yyyy-mm-dd&gt;</code> (prune blocks before the given height/date)</li>\n<li><code class=\"language-text\">TXINDEX=0</code> (enabling this requires pruning to be disabled)</li>\n<li><code class=\"language-text\">BITCOIND_LISTEN=0</code> (accept incoming connections on the bitcoin p2p network)</li>\n<li><code class=\"language-text\">BITCOIND_TOR=0</code> (connect to the bitcoin network through tor)</li>\n<li><code class=\"language-text\">BITCOIND_RPC_ACCESS</code> (expose the bitcoind rpc with password-based auth)</li>\n<li><code class=\"language-text\">BITCOIND_RPC_ONION=0</code> (expose the bitcoind rpc over onion)</li>\n<li><code class=\"language-text\">BITCOIND_OPTS=&lt;none&gt;</code> (custom cli options for bitcoind)</li>\n<li><code class=\"language-text\">BITCOIND_LOGS=0</code> (display bitcoind's logs in the <code class=\"language-text\">docker run</code> output)</li>\n</ul>\n<p>A config file may also be provided at <code class=\"language-text\">/data/bitcoin/bitcoin.conf</code>, but the options above will take priority over it.</p>\n<h4 id=\"options-for-fastsync\"><a href=\"#options-for-fastsync\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Options for fastsync</h4>\n<ul>\n<li><code class=\"language-text\">TRUSTED_FASTSYNC=0</code> (enable fast-sync)</li>\n<li><code class=\"language-text\">FASTSYNC_PARALLEL=1</code> (parallel connections for download)</li>\n</ul>\n<h4 id=\"paths\"><a href=\"#paths\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Paths</h4>\n<ul>\n<li><code class=\"language-text\">/bitcoin</code> (mount the bitcoind datadir from the host to enable cookie authentication)</li>\n<li><code class=\"language-text\">/data/bitcoin</code> (managed bitcoind data directory)</li>\n</ul>\n<h4 id=\"ports\"><a href=\"#ports\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ports</h4>\n<ul>\n<li><code class=\"language-text\">8332</code>/<code class=\"language-text\">18332</code>/<code class=\"language-text\">38332</code>/<code class=\"language-text\">18443</code> (RPC)</li>\n<li><code class=\"language-text\">8333</code>/<code class=\"language-text\">18333</code>/<code class=\"language-text\">38333</code>/<code class=\"language-text\">18444</code> (P2P)<br>\n(mainnet/testnet/signet/regtest)</li>\n</ul>\n<h2 id=\"bitcoin-wallet-tracker\"><a href=\"#bitcoin-wallet-tracker\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>üîç Bitcoin Wallet Tracker</h2>\n<p><a href=\"https://bwt.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Bitcoin Wallet Tracker</a> is a personal wallet tracker that watches your wallet's activity, available as an Electrum RPC server and an <a href=\"https://github.com/bwt-dev/bwt#http-api\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HTTP API</a>.</p>\n<p>BWT keeps an index of your wallet transactions only. To make your wallet activity available, you'll need to <a href=\"getting-started#configuration\">configure</a> your <code class=\"language-text\">XPUB</code>s/<code class=\"language-text\">DESCRIPTOR</code>s (use <code class=\"language-text\">XPUB_*</code>/<code class=\"language-text\">DESC_*</code> if you have multiple, e.g. <code class=\"language-text\">XPUB_1</code> or <code class=\"language-text\">DESC_CHANGE</code>).</p>\n<p>With pruning enabled (the default), starting with a new wallet is the easiest.\nA new wallet is also recommended for privacy reasons if your addresses were previously exposed to public Electrum servers.\nTo use an existing wallet, refer to the <a href=\"getting-started#pruning\">instructions here</a>.</p>\n<h4 id=\"electurm-wallet-setup\"><a href=\"#electurm-wallet-setup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Electurm wallet setup</h4>\n<details>\n <summary>Expand instructions...</summary>\n<p>If you're creating a new wallet, make sure you don't connect to public servers while doing it to avoid exposing your addresses. You can start Electrum with <code class=\"language-text\">--offline</code> to ensure that.</p>\n<p>Grab your xpub from <code class=\"language-text\">Wallet</code> > <code class=\"language-text\">Information</code> and add it to your config file (<code class=\"language-text\">~/eznode/config</code>) as a new line with <code class=\"language-text\">XPUB=&lt;my-xpub&gt;</code>.</p>\n<p>Restart eznode, wait for BWT to start up and run <code class=\"language-text\">electrum $(docker exec ez electrum-args)</code> to start Electrum and connect it with your local node. Or you can do this manually:</p>\n<pre class=\"language-text\">electrum --oneserver --server ez:50001:t --skipmerklecheck</pre>\n<blockquote>\n<p>If you don't have the <a href=\"accessing#connecting-locally\"><code class=\"language-text\">ez</code> hostname</a> set up, replace <code class=\"language-text\">ez</code> with the IP address shown on startup (<code class=\"language-text\">electrum-args</code> does this automatically). The <a href=\"https://github.com/spesmilo/electrum/pull/4957\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">skipmerklecheck</code></a> option is needed to support pruning.</p>\n</blockquote>\n<p>To configure Electrum to use eznode by default, run <code class=\"language-text\">docker exec ez electrum-cfg | bash -x</code>. This will issue <code class=\"language-text\">electrum setconfig</code> commands (you can run without <code class=\"language-text\">| bash</code> to see them).</p>\n<p>If you're connecting remotely, you'll need to setup <a href=\"accessing#connecting-remotely\">Tor Onion or an SSH tunnel</a> for secure access.</p>\n</details>\n<h4 id=\"electrum-wallet-setup---with-the-bwt-plugin\"><a href=\"#electrum-wallet-setup---with-the-bwt-plugin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Electrum wallet setup - with the BWT plugin</h4>\n<details>\n <summary>Expand instructions...</summary>\n<p>You can setup Electrum desktop to connect with eznode using the <a href=\"https://github.com/bwt-dev/bwt-electrum-plugin\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">BWT Electrum plugin</a>.\nThe plugin will run a separate BWT instance that connects directly to Bitcoin Core and automatically detects your wallet(s) xpub(s).</p>\n<p><a href=\"#accessing-managed-full-node\">Open RPC access</a> to Bitcoin Core by setting <code class=\"language-text\">BITCOIND_RPC_ACCESS=&lt;user:pwd&gt;</code>, then follow the <a href=\"https://github.com/bwt-dev/bwt-electrum-plugin#installation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">instructions here</a> to setup the plugin.</p>\n</details>\n<h4 id=\"options\"><a href=\"#options\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Options</h4>\n<ul>\n<li><code class=\"language-text\">BWT=1</code> (enabled by default, set to <code class=\"language-text\">0</code> to turn off)</li>\n<li><code class=\"language-text\">XPUB</code>/<code class=\"language-text\">XPUB_*</code> (xpubs/ypubs/zpubs to track)</li>\n<li><code class=\"language-text\">DESCRIPTOR</code>/<code class=\"language-text\">DESCRIPTOR_*</code>/<code class=\"language-text\">DESC_*</code> (script descriptors to track)</li>\n<li><code class=\"language-text\">RESCAN_SINCE=now</code> (date to begin rescanning for historical wallet transactions in <code class=\"language-text\">YYYY-MM-DD</code> format. rescan is disabled by default.)</li>\n<li><code class=\"language-text\">BITCOIND_WALLET=ez-bwt</code> (bitcoind wallet to use)</li>\n<li><code class=\"language-text\">CREATE_WALLET_IF_MISSING=1</code> (automatically create a new bitcoind wallet)</li>\n<li><code class=\"language-text\">GAP_LIMIT=20</code> (the <a href=\"https://github.com/bwt-dev/bwt#gap-limit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gap limit</a> for tracking derived addresses)</li>\n<li><code class=\"language-text\">FORCE_RESCAN=0</code> (force rescanning for historical transactions, even if the addresses were already previously imported)</li>\n<li><code class=\"language-text\">HTTP_CORS=&lt;none&gt;</code> (allowed cross-origins for the http api server)</li>\n<li><code class=\"language-text\">WEBHOOK_URLS=&lt;none&gt;</code> (URLs to notify with real-time wallet events)</li>\n<li><code class=\"language-text\">AUTH_TOKEN=&lt;none&gt;</code> (enable authentication with the specified token)</li>\n<li><code class=\"language-text\">BWT_LOGS=1</code> (display bwt's logs in the <code class=\"language-text\">docker run</code> output)</li>\n</ul>\n<p>The full list of BWT's config options is <a href=\"https://github.com/bwt-dev/libbwt#config-options\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">available here</a>.</p>\n<h4 id=\"ports-1\"><a href=\"#ports-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ports</h4>\n<ul>\n<li><code class=\"language-text\">50001</code> (Electrum RPC)</li>\n<li><code class=\"language-text\">3060</code> (HTTP API)</li>\n</ul>\n<h4 id=\"paths-1\"><a href=\"#paths-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Paths</h4>\n<ul>\n<li><code class=\"language-text\">/data/track-addresses.txt</code> (optional file with standalone addresses to track)</li>\n</ul>\n<h2 id=\"btc-rpc-explorer\"><a href=\"#btc-rpc-explorer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>üó∫Ô∏è BTC RPC Explorer</h2>\n<p><a href=\"https://github.com/janoside/btc-rpc-explorer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">BTC RPC Explorer</a> is a <a href=\"https://explorer.btc21.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">block explorer</a> and node dashboard with an <a href=\"https://explorer.btc21.org/rpc-browser?method=getblockheader\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RPC console</a>, <a href=\"https://explorer.btc21.org/block-stats\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">statistics and graphs</a>, <a href=\"https://explorer.btc21.org/node-status\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">status page</a>, <a href=\"https://explorer.btc21.org/peers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">peers overview</a> and more.</p>\n<p>Automatically connects with the BWT Electrum server, to enable exploration of your wallet addresses (but not of arbitrary addresses).</p>\n<h4 id=\"pruning-support\"><a href=\"#pruning-support\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Pruning support</h4>\n<details>\n <summary>Expand...</summary>\n<p>When pruning is enabled or if <code class=\"language-text\">txindex</code> is disabled (the default), some functionality will be limited:</p>\n<ul>\n<li>You will only be able to search for wallet, mempool and recently confirmed transactions by their <code class=\"language-text\">txid</code>.<br>\nSearching for non-wallet transactions that were confirmed over 3 blocks ago is only possible if you provide the confirmed block height in addition to the <code class=\"language-text\">txid</code>, using <code class=\"language-text\">&lt;txid&gt;@&lt;height&gt;</code> in the search box.</li>\n<li>Pruned blocks will display basic header information, without the list of transactions. Transactions in pruned blocks will not be available, unless they're wallet-related.</li>\n<li>The address and amount of previous transaction outputs will not be shown, only the <code class=\"language-text\">txid:vout</code>. </li>\n<li>Mining fees will only be shown for unconfirmed transactions.</li>\n</ul>\n<p>To enable full block explorer functionality, set <code class=\"language-text\">PRUNE=0 TXINDEX=1</code>.</p>\n</details>\n<h4 id=\"options-1\"><a href=\"#options-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Options</h4>\n<ul>\n<li><code class=\"language-text\">EXPLORER=1</code> (enabled by default, set to <code class=\"language-text\">0</code> to turn off)</li>\n<li><code class=\"language-text\">EXPLORER_LOGS=0</code>  (display btc-rpc-explorer's logs in the <code class=\"language-text\">docker run</code> output)</li>\n<li><code class=\"language-text\">AUTH_TOKEN=&lt;none&gt;</code> (alias for <code class=\"language-text\">BTCEXP_BASIC_AUTH_PASSWORD</code>)</li>\n</ul>\n<p>Plus all of <a href=\"https://github.com/janoside/btc-rpc-explorer/blob/master/.env-sample\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">btc-rpc-explorer's options</a>.</p>\n<h4 id=\"ports-2\"><a href=\"#ports-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ports</h4>\n<ul>\n<li><code class=\"language-text\">3002</code></li>\n</ul>\n<h2 id=\"specter-desktop\"><a href=\"#specter-desktop\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>üëª Specter Desktop</h2>\n<p><a href=\"https://github.com/cryptoadvance/specter-desktop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Specter Desktop</a> is a wallet GUI for Bitcoin Core with a focus on hardware and multi-sig setups.</p>\n<p>Using Specter with USB hardware wallets requires <a href=\"https://github.com/cryptoadvance/specter-desktop/tree/master/udev#udev-rules\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">setting up udev rules</a> on the host and starting docker with <a href=\"https://docs.docker.com/engine/reference/commandline/run/#add-host-device-to-container---device\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">--device /dev/&lt;usb-device-id&gt;</code></a>. If you're unsure what the device id is, you could also (less ideally) use <a href=\"https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">--privileged -v /dev:/dev</code></a> to give the container full access to all host devices.</p>\n<h4 id=\"options-2\"><a href=\"#options-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Options</h4>\n<ul>\n<li><code class=\"language-text\">SPECTER=0</code> (disabled by default, set to <code class=\"language-text\">1</code> to enable)</li>\n<li><code class=\"language-text\">SPECTER_LOGS=0</code> (display spectr's logs in the <code class=\"language-text\">docker run</code> output)</li>\n<li><code class=\"language-text\">AUTH_TOKEN=&lt;none&gt;</code> (sets the password for the admin account)</li>\n</ul>\n<p>Additional configuration options are available through Specter's web interface.</p>\n<h4 id=\"paths-2\"><a href=\"#paths-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Paths</h4>\n<ul>\n<li><code class=\"language-text\">/data/specter</code> (wallets, devices and other configuration)</li>\n</ul>\n<h4 id=\"ports-3\"><a href=\"#ports-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ports</h4>\n<ul>\n<li><code class=\"language-text\">25441</code></li>\n</ul>\n"}},"context":{}}